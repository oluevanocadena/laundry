<grid [gap]="[0,24]" [direction]="'column'" [template]="'1fr'" width="100%" class="bg-01">
    <top-bar width="100%" />
    <grid [direction]="'column'" [template]="'max-content 1fr'">
        <side-menu *ngIf="isMobileOrTablet === false" />
        <grid [gap]="[0,24]" [direction]="'row'" [height]="'calc(100vh - 49px)'"
            [template]="'max-content max-content 1fr max-content'">
            <grid [direction]="'column'" [padding]="'1rem'">
                <span class="fw-500 f-01 f-24" padding="0.25rem 0 0 0">
                    Clientes
                </span>
            </grid>

            <grid [gap]="[8,8]" [direction]="'column'" [template]="'1fr max-content'" height="100%"
                class="wrap brdr-top bg-02" padding="0.5rem 1rem">
                <grid [gap]="[8,8]" [direction]="'column'" [align]="'center-left'">
                    <nz-select ngModel="all" [width]="'150px'">
                        <nz-option nzValue="all" nzLabel="Todos los clientes"></nz-option>
                        <nz-option nzValue="active" nzLabel="Clientes activos"></nz-option>
                        <nz-option nzValue="disabled" nzLabel="Clientes inactivos" nzDisabled></nz-option>
                    </nz-select>
                    <button outline small flex>
                        <tui-icon icon="@tui.columns-3" class="f-16 f-06" />
                        Columnas
                    </button>
                    <button outline small flex>
                        <tui-icon icon="@tui.corner-left-up" class="f-16 f-06" />
                        Ordenado por email
                    </button>
                </grid>
                <grid [gap]="[8,8]" [direction]="'column'" [align]="'center-right'" height="100%">
                    <button primary small [routerLink]="routes.CustomerDraft">
                        Crear cliente
                    </button>
                </grid>
            </grid>

            <grid [direction]="'row'" [align]="'top-left'" height="100%" width="100%" class="scroll-h scroll-v bg-02 baseline">
                <table>
                    <thead>
                        <tr>
                            <th> </th>
                            <th width="100px">Date</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th width="120px">Marketing</th>
                            <th>Amount Spent</th>
                            <th>Orders</th>
                            <th width="80px">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngIf="loading">
                            <td colspan="9">
                                <grid [direction]="'column'" [align]="'center-center'" padding="2rem 0">
                                    <grid [gap]="[16,16]" [direction]="'column'" [template]="'1fr'" class="f-03">
                                        <tui-loader [size]="'m'" />
                                        Loading...
                                    </grid>
                                </grid>
                            </td>
                        </tr>
                        <tr *ngIf="loading === false && customers.length === 0">
                            <td colspan="9">
                                <grid [direction]="'column'" [align]="'center-center'" padding="2rem 0">
                                    <grid [gap]="[16,16]" [direction]="'column'" [align]="'center-left'" class="f-15">
                                        <tui-icon icon="@tui.inbox" class="f-24 f-03" />
                                        <span class="fw-400 f-03">No items found</span>
                                    </grid>
                                </grid>
                            </td>
                        </tr>
                        <ng-container *ngIf="loading === false">
                            <tr *ngFor="let item of customers; let i = index">
                                <td>
                                    <label nz-checkbox></label>
                                </td>
                                <td>{{item.createdAt | dateFormat: 'DD MMM[,] YYYY' | capitalization }}</td>
                                <td>{{item.name}}</td>
                                <td>{{item.email}}</td>
                                <td>
                                    <status-badge [label]="item?.statusMarketing" [statusId]="item?.statusMarketingId"
                                        [type]="'customer-marketing'" [size]="'m'" />
                                </td>
                                <td>{{item.spentAmount || 0 | numeralFormat: '$0,0.00'}}</td>
                                <td>
                                    {{item.totalOrders}}
                                    {{item.totalOrders > 1 ? 'orders' : 'order'}}
                                </td>
                                <td>
                                    <grid [direction]="'column'" [align]="'center-center'" width="100%">
                                        <status-badge [label]="item?.status" [statusId]="item?.statusId"
                                            [type]="'customer'" [size]="'m'" />
                                    </grid>
                                </td>
                            </tr>
                        </ng-container>
                    </tbody>
                </table>
            </grid>

            <grid [direction]="'column'" [template]="'1fr max-content'" padding="0.5rem 1rem">
                <grid [direction]="'column'" [align]="'center-left'">
                    <button outline small flex prefix>
                        <tui-icon icon="@tui.arrow-left" class="f-16 f-06" />
                    </button>
                    <button outline small flex suffix> 
                        <tui-icon icon="@tui.arrow-right" class="f-16 f-06" />
                    </button>
                </grid>
                <grid [direction]="'column'" [align]="'center-right'">
                    <button outline small flex>
                        <tui-icon icon="@tui.refresh-ccw" class="f-16 f-06" />
                        Actualizar
                    </button>
                </grid>
            </grid>
        </grid>

    </grid>

</grid>

<modal-search #search [(show)]="showSearch" (onSearch)="onSearch($event)" />
<modal-sort [(show)]="showSort" (onSort)="onSort($event)" />